<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Staff Ticket | Evo Support</title>
  <link rel="stylesheet" href="/app.css?v=20260207h">
  <script src="/ui.js" defer></script>
  <script src="/staff-ticket.js" defer></script>
</head>
<body>
  <header class="site-header">
    <div class="brand">
      <a href="/">Evo Support</a>
    </div>
    <nav class="site-nav">
      <a href="/">Home</a>
      <a href="/tickets.html" data-auth="user">My Tickets</a>
      <a href="/staff.html" data-auth="staff">Staff</a>
      <a href="/admin.html" data-auth="admin">Admin</a>
      <a class="btn" href="/api/auth/discord" data-auth="guest">Login with Discord</a>
      <a href="/api/logout" data-auth="user">Logout</a>
    </nav>
  </header>
  <main class="site-main">
    <section class="page-header">
      <div>
        <h1 data-ticket-title>Ticket</h1>
        <p data-ticket-subject></p>
      </div>
      <div class="meta" data-ticket-meta></div>
    </section>

    <section class="card">
      <button class="btn secondary" type="button" data-claim-button data-action="claim">Claim</button>
      <div class="inline">
        <select name="status_id" data-status-select></select>
        <button class="btn secondary" type="button" data-status-button>Update status</button>
      </div>
      <div class="inline">
        <select name="assigned_staff_id" data-assign-select></select>
        <button class="btn secondary" type="button" data-assign-button>Assign</button>
      </div>
    </section>

    <section class="card">
      <h3>Transcripts</h3>
      <p class="muted">Generate a saved snapshot of this ticket (messages + attachments + key metadata).</p>
      <div class="inline">
        <button class="btn secondary" type="button" data-transcript-generate>Generate transcript</button>
      </div>
      <div data-transcripts-list class="muted">Loadingâ€¦</div>
    </section>

    <section class="thread" data-ticket-thread></section>

    <section class="card">
      <h3>Reply</h3>
      <form class="form" data-reply-form>
        <textarea name="message" rows="4" required></textarea>
        <label>
          Attachments
          <input type="file" name="attachments" multiple>
        </label>
        <button class="btn" type="submit">Send reply</button>
      </form>
    </section>
  </main>
  <footer class="site-footer">
    <span>Need help? Open a ticket and we will get back to you.</span>
  </footer>
</body>
</html>
